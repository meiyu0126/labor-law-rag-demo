# ğŸ“‚ ä¼æ¥­å‹åŸºæ³•æ™ºæ…§å•ç­”åŠ©æ‰‹ (Labor Law RAG Assistant)

é€™æ˜¯ä¸€å€‹çµåˆ **RAG (Retrieval-Augmented Generation)** æŠ€è¡“èˆ‡ **å³æ™‚ç¶²è·¯çˆ¬èŸ²** çš„ AI æ™ºæ…§å•ç­”ç³»çµ±ã€‚
ç³»çµ±é è¨­æœƒè‡ªå‹•çˆ¬å– [å…¨åœ‹æ³•è¦è³‡æ–™åº«](https://law.moj.gov.tw/) çš„æœ€æ–°å‹å‹•åŸºæº–æ³•æ¢æ–‡ï¼Œç¢ºä¿å›ç­”ä¾æ“šæ˜¯æœ€æ–°çš„æ³•å¾‹è¦ç¯„ï¼›åŒæ™‚ä¹Ÿæ”¯æ´ä½¿ç”¨è€…ä¸Šå‚³è‡ªå®šç¾©çš„ PDF å…§éƒ¨æ–‡ä»¶ï¼ˆå¦‚å“¡å·¥æ‰‹å†Šï¼‰ï¼Œå¯¦ç¾éˆæ´»çš„ä¼æ¥­ç´šæ–‡ä»¶å•ç­”ã€‚

ğŸ‘‰ **[é»æ“Šé€™è£¡é«”é©— Live Demo](https://labor-law-rag-demo-drnxcasmvkg3mursnab7ti.streamlit.app/)**

---

## ğŸš€ å°ˆæ¡ˆç‰¹è‰² (Key Features)

### 1. é›™æ¨¡çµ„è³‡æ–™æº (Hybrid Data Sources)
* **ğŸ•·ï¸ è‡ªå‹•åŒ–æ³•è¦çˆ¬èŸ²**ï¼š
    * ä½¿ç”¨ `Requests` + `BeautifulSoup4` å³æ™‚æŠ“å–å…¨åœ‹æ³•è¦è³‡æ–™åº«çš„å‹å‹•åŸºæº–æ³•ã€‚
    * å¯¦ä½œ **ETL æ¸…æ´—**ï¼Œå°‡ HTML è½‰æ›ç‚ºçµæ§‹åŒ–çš„ `Document` ç‰©ä»¶ï¼ˆä¸”ä»¥ Metadata ä¿ç•™æ¢è™Ÿ ï¼‰ã€‚
    * æ‡‰ç”¨ `st.cache_data` æ©Ÿåˆ¶ï¼Œé¿å…é‡è¤‡è«‹æ±‚ï¼Œæå‡æ•ˆèƒ½ä¸¦é™ä½è¢«å°é–é¢¨éšªã€‚
* **ğŸ“„ è‡ªå®šç¾©æ–‡ä»¶ä¸Šå‚³**ï¼š
    * æ”¯æ´ä½¿ç”¨è€…ä¸Šå‚³ PDF æª”æ¡ˆï¼ˆå¦‚å…¬å¸å…§è¦ï¼‰ã€‚
    * ä½¿ç”¨ `tempfile` èˆ‡ `PyPDFLoader` è™•ç†æš«å­˜èˆ‡è§£æï¼Œå¯¦ç¾å³æ™‚åˆ‡æ›çŸ¥è­˜åº«ã€‚

### 2. ç²¾æº– RAG æª¢ç´¢æ¶æ§‹
* **æ¨¡å‹å‡ç´š**ï¼šæ¡ç”¨ OpenAI **`text-embedding-3-large`** é€²è¡Œé«˜ç¶­åº¦å‘é‡åŒ–ï¼Œæ­é… **`gpt-4o-mini`** é€²è¡Œæ¨è«–ï¼Œå¤§å¹…æå‡èªæ„ç†è§£èƒ½åŠ›ã€‚
* **æ™ºæ…§ä¾†æºå¼•ç”¨ (Smart Citation)**ï¼š
    * é‡å°æ³•è¦ï¼šç²¾æº–é¡¯ç¤º **ã€Œç¬¬ X æ¢ã€**ã€‚
    * é‡å° PDFï¼šç²¾æº–é¡¯ç¤º **ã€Œç¬¬ X é ã€** èˆ‡åŸå§‹æª”åã€‚
* **æŠ—å¹»è¦ºæ©Ÿåˆ¶**ï¼šç³»çµ±è¢«åš´æ ¼é™åˆ¶åªèƒ½ä¾æ“šã€Œæª¢ç´¢åˆ°çš„å…§å®¹ã€å›ç­”ï¼Œè‹¥æŸ¥ç„¡è³‡æ–™æœƒå¦‚å¯¦å‘ŠçŸ¥ã€‚

---

## ğŸ› ï¸ æŠ€è¡“å †ç–Š (Tech Stack)

| é¡åˆ¥ | æŠ€è¡“/å·¥å…· | èªªæ˜ |
| :--- | :--- | :--- |
| **Frontend** | **Streamlit** | å¿«é€Ÿå»ºæ§‹äº’å‹•å¼ Chat UIï¼Œæ•´åˆå´é‚Šæ¬„åƒæ•¸è¨­å®š |
| **Framework** | **LangChain** | ä½¿ç”¨ **LCEL** (LangChain Expression Language) å»ºæ§‹ Chain |
| **Model** | **OpenAI** | GPT-4o-mini (LLM), Text-Embedding-3-Large (Embedding) |
| **Database** | **ChromaDB** | æœ¬åœ°ç«¯è¼•é‡ç´šå‘é‡è³‡æ–™åº« (Vector Store) |
| **Crawler** | **BS4 & Requests** | HTML è§£æèˆ‡è³‡æ–™æ¸…æ´— |
| **Deployment** | **Streamlit Cloud** | CI/CD è‡ªå‹•åŒ–éƒ¨ç½² |

---

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

```text
labor-law-rag-demo/
â”œâ”€â”€ app.py                  # æ ¸å¿ƒä¸»ç¨‹å¼ (åŒ…å«çˆ¬èŸ²ã€ETLã€RAG Chainã€UI é‚è¼¯)
â”œâ”€â”€ requirements.txt        # å°ˆæ¡ˆä¾è³´å¥—ä»¶æ¸…å–®
â””â”€â”€ .env                    # ç’°å¢ƒè®Šæ•¸ (OpenAI API Key)
```  

---

## ğŸ’¡ æ ¸å¿ƒé‚è¼¯æµç¨‹ (System Workflow)

### 1. åˆå§‹åŒ– (Initialization)
* **ç³»çµ±å•Ÿå‹•æ™‚**ï¼šæª¢æŸ¥æ˜¯å¦æœ‰ä¸Šå‚³æª”æ¡ˆã€‚
* **ç„¡ä¸Šå‚³**ï¼šè§¸ç™¼çˆ¬èŸ² -> æŠ“å–å‹å‹•éƒ¨ç¶²é  -> è§£ææ¢æ–‡ -> å¯«å…¥ ChromaDBã€‚
* **æœ‰ä¸Šå‚³**ï¼šè®€å– PDF -> æ–‡å­—åˆ‡åˆ† (Chunking) -> å¯«å…¥ ChromaDBã€‚

### 2. æª¢ç´¢ (Retrieval)
* å°‡ä½¿ç”¨è€…å•é¡Œè½‰ç‚º Vectorã€‚
* ä½¿ç”¨ **MMR (Maximal Marginal Relevance)** æ¼”ç®—æ³•æœå°‹ Top-K ç›¸é—œç‰‡æ®µï¼Œå…¼é¡§ç›¸é—œæ€§èˆ‡å¤šæ¨£æ€§ã€‚

### 3. ç”Ÿæˆ (Generation)
* å°‡ã€Œæª¢ç´¢åˆ°çš„è³‡æ–™ã€èˆ‡ã€Œæ­·å²å°è©±ã€å¡«å…¥ Prompt Templateã€‚
* LLM ç”Ÿæˆå›ç­”ä¸¦æ¨™è¨»ä¾†æºã€‚

---

## ğŸ’» å¦‚ä½•åœ¨æœ¬åœ°ç«¯åŸ·è¡Œ (Local Installation)

å¦‚æœè¦åœ¨è‡ªå·±çš„é›»è…¦ä¸Šé‹è¡Œæ­¤å°ˆæ¡ˆï¼Œè«‹ä¾ç…§ä»¥ä¸‹æ­¥é©Ÿæ“ä½œï¼š

1.  **Clone å°ˆæ¡ˆ**
    ```bash
    git clone [https://github.com/meiyu0126/labor-law-rag-demo.git](https://github.com/meiyu0126/labor-law-rag-demo.git)
    cd labor-law-rag-demo
    ```

2.  **å»ºç«‹è™›æ“¬ç’°å¢ƒ (å»ºè­°)**
    ```bash
    # Windows
    python -m venv .venv
    .venv\Scripts\activate

    # Mac/Linux
    python3 -m venv .venv
    source .venv/bin/activate
    ```

3.  **å®‰è£ä¾è³´å¥—ä»¶**
    ```bash
    pip install -r requirements.txt
    ```

4.  **è¨­å®šç’°å¢ƒè®Šæ•¸**
    è«‹åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.env` æª”æ¡ˆï¼Œä¸¦å¡«å…¥æ‚¨çš„ OpenAI API Keyï¼š
    ```text
    OPENAI_API_KEY="sk-proj-xxxxxxxx..."
    ```

5.  **å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼**
    ```bash
    streamlit run app.py
    ```
